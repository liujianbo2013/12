# 好活 - 安全守护应用

一款后台运行的 Android 应用，在每日 08:00–20:00 时段内，若设备连续 5 小时未解锁，则自动向预设联系人列表发送提醒短信。

## 核心功能

- ✅ **后台常驻服务** - 开机自启动，息屏状态下持续运行
- ✅ **解锁状态监听** - 实时检测设备解锁/锁屏事件
- ✅ **定时检查机制** - 在 08:00–20:00 时段内，每小时检查一次未解锁时长
- ✅ **自动短信发送** - 触发条件满足时，向预置号码列表逐条发送预设短信
- ✅ **联系人管理** - 增删改查紧急联系人（姓名+手机号）
- ✅ **短信模板设置** - 可编辑短信内容
- ✅ **开关控制** - 允许用户启用/禁用自动短信功能
- ✅ **测试模式** - 手动触发短信发送测试
- ✅ **日志记录** - 记录关键事件（解锁、锁屏、短信发送成功/失败）

## 技术架构

- **平台**: Android (API Level 21+)
- **语言**: Kotlin
- **后台服务**: Foreground Service（避免被系统回收）
- **数据库**: SQLite

## 模块设计

| 模块 | 职责 |
|------|------|
| `UnlockMonitorService` | 监听锁屏/解锁广播，定时检查未解锁时长 |
| `SmsSender` | 短信发送封装 |
| `ContactManager` | 联系人CRUD操作 |
| `Logger` | 本地日志存储 |
| `DatabaseHelper` | 数据库操作封装 |

## 快速开始

### 构建要求

- JDK 8 或更高版本
- Android SDK (API Level 34)
- Android SDK Build-Tools
- Android SDK Platform-Tools

### 构建步骤

1. 克隆或下载项目
2. 使用 Android Studio 打开项目
3. 等待 Gradle 同步完成
4. 选择 Build > Build Bundle(s) / APK(s) > Build APK(s)
5. APK 文件位于: `app/build/outputs/apk/debug/app-debug.apk`

详细构建说明请参考 [BUILD_INSTRUCTIONS.md](BUILD_INSTRUCTIONS.md)

## 使用说明

### 首次使用

1. 安装应用后，授予所需权限（短信、电话状态、联系人等）
2. 添加紧急联系人
3. 编辑短信模板（可选）
4. 启用服务开关

### 日常使用

- 应用会在后台持续运行
- 每日 08:00-20:00 期间，每小时检查一次未解锁时长
- 如果连续 5 小时未解锁，自动向所有联系人发送提醒短信
- 可以随时查看日志、测试短信或修改设置

## 安全与隐私

- 短信发送前需用户启用服务
- 联系人数据仅本地存储，不上传服务器
- 提供"一键关闭"功能立即停止服务

## 异常处理

- **无SIM卡**: 提示用户插入SIM卡
- **短信发送失败**: 记录错误
- **服务被杀死**: 通过 START_STICKY 尝试重启

## 版本信息

- **应用名称**: 好活
- **包名**: com.goodwork.app
- **版本号**: 1.0.0
- **最低 API 级别**: 21 (Android 5.0)
- **目标 API 级别**: 34 (Android 14)

## 许可证

本项目仅供学习和个人使用。

## 联系方式

如有问题或建议，请联系开发者。